{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '44903420-1183eb8cf2f9f1f8b99b46ba0';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(\n    query\n  )}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n  try {\n    const response = await axios.get(url);\n    return response.data;\n  } catch (error) {\n    throw new Error('Network response was not ok');\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nlet lightbox;\n\nexport function renderImages(images) {\n  const gallery = document.getElementById('gallery');\n  const imageElements = images\n    .map(image => {\n      return `\n        <a href=\"${image.largeImageURL}\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" title=\"${image.tags}\">\n          <div>\n            <p>Likes: ${image.likes}</p>\n            <p>Views: ${image.views}</p>\n            <p>Comments: ${image.comments}</p>\n            <p>Downloads: ${image.downloads}</p>\n          </div>\n        </a>`;\n    })\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', imageElements);\n\n  if (lightbox) {\n    lightbox.refresh();\n  } else {\n    lightbox = new SimpleLightbox('.gallery a');\n  }\n}\n\nexport function showLoading() {\n  document.getElementById('loading').style.display = 'block';\n}\n\nexport function hideLoading() {\n  document.getElementById('loading').style.display = 'none';\n}\n\nexport function showNoResultsMessage() {\n  iziToast.info({\n    title: 'Info',\n    message:\n      'Sorry, there are no images matching your search query. Please try again!',\n  });\n}\n\nexport function showError(message) {\n  iziToast.error({ title: 'Error', message });\n}\n\nexport function showEndOfResultsMessage() {\n  iziToast.info({\n    title: 'Info',\n    message: \"We're sorry, but you've reached the end of search results.\",\n  });\n}\n\nexport function toggleLoadMoreButton(show) {\n  const loadMoreButton = document.getElementById('load-more');\n  loadMoreButton.style.display = show ? 'block' : 'none';\n}\n","import { fetchImages } from './js/pixabay-api';\nimport {\n  renderImages,\n  showLoading,\n  hideLoading,\n  showNoResultsMessage,\n  showError,\n  showEndOfResultsMessage,\n  toggleLoadMoreButton,\n} from './js/render-functions';\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\n\ndocument\n  .getElementById('search-form')\n  .addEventListener('submit', async function (event) {\n    event.preventDefault();\n    currentQuery = document.getElementById('search-input').value.trim();\n    currentPage = 1;\n    totalHits = 0;\n\n    if (!currentQuery) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Please enter a search query.',\n      });\n      return;\n    }\n\n    const gallery = document.getElementById('gallery');\n    gallery.innerHTML = '';\n    toggleLoadMoreButton(false);\n\n    try {\n      showLoading();\n      const data = await fetchImages(currentQuery, currentPage);\n      hideLoading();\n\n      totalHits = data.totalHits;\n\n      if (data.hits.length === 0) {\n        showNoResultsMessage();\n      } else {\n        renderImages(data.hits);\n        toggleLoadMoreButton(true);\n      }\n    } catch (error) {\n      showError('Something went wrong. Please try again later.');\n      console.error('Error fetching images:', error);\n      hideLoading();\n    }\n  });\n\ndocument\n  .getElementById('load-more')\n  .addEventListener('click', async function () {\n    currentPage += 1;\n\n    try {\n      showLoading();\n      const data = await fetchImages(currentQuery, currentPage);\n      hideLoading();\n\n      if (data.hits.length === 0) {\n        showEndOfResultsMessage();\n        toggleLoadMoreButton(false);\n      } else {\n        renderImages(data.hits);\n\n        const galleryItems = document.querySelectorAll('.gallery a');\n        const lastItem = galleryItems[galleryItems.length - 1];\n        const { height: cardHeight } = lastItem.getBoundingClientRect();\n\n        window.scrollBy({\n          top: cardHeight * 2,\n          behavior: 'smooth',\n        });\n\n        if (currentPage * 15 >= totalHits) {\n          showEndOfResultsMessage();\n          toggleLoadMoreButton(false);\n        }\n      }\n    } catch (error) {\n      showError('Something went wrong. Please try again later.');\n      console.error('Error fetching images:', error);\n      hideLoading();\n    }\n  });\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","url","axios","lightbox","renderImages","images","gallery","imageElements","image","SimpleLightbox","showLoading","hideLoading","showNoResultsMessage","iziToast","showError","message","showEndOfResultsMessage","toggleLoadMoreButton","show","loadMoreButton","currentPage","currentQuery","totalHits","event","data","error","galleryItems","lastItem","cardHeight"],"mappings":"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"}